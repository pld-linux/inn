--- inn-2.3.2/configure.in.orig	Tue Sep 11 21:44:00 2001
+++ inn-2.3.2/configure.in	Tue Sep 11 21:56:49 2001
@@ -425,7 +425,7 @@
                 case $i in
                 inria)
                         dnl http://www.kame.net/
-                        AC_EGREP_CPP(%%%yes%%%, [dnl
+                        AC_EGREP_CPP(%%%yes%%%, [
 #include <netinet/in.h>
 #ifdef IPV6_INRIA_VERSION
 %%%yes%%%
@@ -435,7 +435,7 @@
                         ;;
                 kame)
 			dnl http://www.kame.net/
-                        AC_EGREP_CPP(%%%yes%%%, [dnl
+                        AC_EGREP_CPP(%%%yes%%%, [
 #include <netinet/in.h>
 #ifdef __KAME__
 %%%yes%%%
@@ -445,7 +445,7 @@
                         ;;
                 linux-glibc)
                         dnl http://www.v6.linux.or.jp/
-                        AC_EGREP_CPP(%%%yes%%%, [dnl
+                        AC_EGREP_CPP(%%%yes%%%, [
 #include <features.h>
 #if defined(__GLIBC__) && __GLIBC__ >= 2 && __GLIBC_MINOR__ >= 1
 %%%yes%%%
@@ -463,7 +463,7 @@
                         fi
                         ;;
                 toshiba)
-                        AC_EGREP_CPP(%%%yes%%%, [dnl
+                        AC_EGREP_CPP(%%%yes%%%, [
 #include <sys/param.h>
 #ifdef _TOSHIBA_INET6
 %%%yes%%%
@@ -474,7 +474,7 @@
                                 CFLAGS="-DINET6 $CFLAGS"])
                         ;;
                 v6d)
-                        AC_EGREP_CPP(%%%yes%%%, [dnl
+                        AC_EGREP_CPP(%%%yes%%%, [
 #include </usr/local/v6/include/sys/v6config.h>
 #ifdef __V6D__
 %%%yes%%%
@@ -485,7 +485,7 @@
 				CFLAGS="-I/usr/local/v6/include $CFLAGS"])
                         ;;
                 zeta)
-                        AC_EGREP_CPP(%%%yes%%%, [dnl
+                        AC_EGREP_CPP(%%%yes%%%, [
 #include <sys/param.h>
 #ifdef _ZETA_MINAMI_INET6
 yes
@@ -1206,8 +1206,8 @@
 else
     ifelse([$5], , :, [$5])
 fi
-undefine([AC_TYPE_NAME])dnl
-undefine([AC_CV_NAME])dnl
+ifdef([AC_TYPE_NAME],[undefine([AC_TYPE_NAME])])dnl
+ifdef([AC_TYPE_NAME],[undefine([AC_CV_NAME])])dnl
 ])
 
 dnl Find a 32 bit type, by trying likely candidates.  First, check for the
@@ -1270,11 +1270,11 @@
 
 dnl If we don't have fcntl, try to find another locking function.
 if test x"$ac_cv_func_fcntl" = xno ; then
-    AC_CHECK_FUNC(flock, AC_DEFINE(HAVE_FLOCK),
-        AC_CHECK_LIB(bsd, flock, 
+    AC_CHECK_FUNC(flock, [AC_DEFINE(HAVE_FLOCK)],
+        [AC_CHECK_LIB(bsd, flock, 
                      AC_DEFINE(HAVE_FLOCK)
                      LIBS="-lbsd $LIBS",
-                     [AC_CHECK_FUNCS(lockf)]))
+                     [AC_CHECK_FUNCS(lockf)])])
 fi
 
 dnl If we don't have statvfs, gather some more information for inndf.
